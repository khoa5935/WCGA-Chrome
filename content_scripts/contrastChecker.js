var e={getStored:(e,t)=>{e=Array.isArray(e)?e:[e],e=chrome.storage.local.get(e,e=>{t&&t(e)});try{e.then(e=>{t&&t(e)})}catch(e){}},setStored:(e,t,n)=>{var a={};a[e]=t,chrome.storage.local.set(a),n&&n(e,t)},removeStored:e=>{chrome.storage.local.remove([e])}};let t=chrome.runtime,Tt=t.getURL("html/"),un=t.getURL("css/"),pn=e=>t.getURL(`_locales/${e}/messages.json`),Ft="data-contrast-checker-active",zt="active",Ut="color-contrast-checker",jt="colorContrastCheckerPanel",$t="data-frame-id",Wt="data-shadow-root",d="shadow-root-",S=250,r="frame_",Xt="data-colorChecker-highlight",g="*[data-colorChecker-highlight] {box-shadow: 0 0 0 1px #F00, inset 0px 0px 0 1px rgba(255, 0, 0, 1);outline: 2px #F00;}",Ht={contrastLevelChecker:{defaultValue:"AA"},autoRefreshCheck:{defaultValue:!1},updateAnalysisOnDOMChanges:{defaultValue:!0},widgetVersion:{},position:{defaultValue:"left"},leftPosition:{defaultValue:!0},pinned:{defaultValue:!1},pinnedByDomain:{defaultValue:""},pinnedByURL:{defaultValue:""},pinnedTabs:{defaultValue:""},language:{defaultValue:"es"}},E={elements:["script","noscript","hr","br","table","tbody","thead","tfoot","tr","option","ul","ol","dl","style","link","iframe","frameset","frame","object","meta","area","img"],attributes:[{name:"type",value:"hidden"},{name:"type",value:"color"}]},fn=[{code:"en",description:"english"}],Jt={},x=0,gn=()=>{},Gt={},mn=!1,Kt,{setStored:l,getStored:m}=e;function hn(e){return JSON.parse(`{${e}}`)}function Qt(e,t={},n=[],a=[]){var r,l,o=document.createElement(e);for(r in t)o.setAttribute(r,t[r]);n=Array.isArray(n)?n:[n];for(let e=0;e<n.length;e++)"string"==typeof n[e]||"number"==typeof n[e]?(l=Yt(n[e]),o.appendChild(l)):o.appendChild(n[e]);a=Array.isArray(a)?a:[a];for(let e=0;e<a.length;e++){var{name:i,callback:s}=a[e];o.addEventListener(i,s)}return o}function Yt(e){return document.createTextNode(e)}function o(){return document.URL?.split(/[?#]/)[0]}function h(e){window.location===window.parent.location&&e()}function Zt(e,t,n="document"){let a=new XMLHttpRequest;a.open("GET",e,!0),a.responseType=n,a.onload=()=>{var e;4===a.readyState&&200===a.status&&("document"===n?(e=y(a.responseXML.documentElement.querySelector(".content")),t(b(e))):t(a.response))},a.onerror=function(e){},a.send(null)}function en(t){let n={};for(var e in Ht)n[e]=Ht[e]?.defaultValue;var a=Object.keys(Ht);m(a,e=>{Jt=Object.assign(n,e),t(Jt)})}function tn(e){(async()=>{await t.sendMessage(e)})()}function y(e){return{type:"element",tagName:e.tagName,attributes:(t=>{var n={};for(let e=0;e<t.length;e++)n[t[e].name]=t[e].value;return n})(e.attributes),children:Array.from(e.childNodes,v)}}function v(e){return 3!==e.nodeType?y(e):{type:"text",textContent:e.textContent}}function b(e){let t;var n=e.type,a=e.children||[],r=e.textContent;return t="element"===n?Qt(e.tagName,e.attributes,a.map(b)):Yt(r)}function O(){C(window.document),yn().forEach(e=>{C(e.shadowRoot)})}function C(e){e.querySelectorAll(`[${Xt}]`).forEach(e=>{e.removeAttribute(Xt)})}function A(e){e._wcc||(e._wcc={});let t=e._wcc._isVisible;if(!1!==t){if("body"===e.tagName.toLowerCase())return!0;var n=e._parentNode||e.parentNode,a=(n._wcc||(n._wcc={}),n._wcc._isVisible);if(!1===a)return e._wcc._isVisible=!1,a;if((t=nn(e))&&a)return e._wcc._isVisible=t;t&&"body"!==n.tagName.toLowerCase()&&(t=A(n)),e._wcc._isVisible=t}return t}function i(){return new URL(document.URL).hostname}function w(n,e){return e.split(",").map(e=>e.trim()).some(e=>{var t;return"."===e.substring(0,1)?n.classList.contains(e.substring(1)):"*["===e.substring(0,2)?(t=e.substring(2).replace("]","").split("="),n.getAttribute(t[0])&&(1===t.length||n.getAttribute(t[0])===t[1])):n.tagName.toLowerCase()===e})}function yn(){return document.querySelectorAll(`*[${Wt}]`)}function N(a,t=document,r=()=>!0){{var[n=document]=[t],l,o;let e=0;for(l of n.querySelectorAll("*"))l.shadowRoot&&!l.getAttribute(Wt)&&(l.setAttribute(Wt,""+d+e),e++,(o=document.createElement("style")).setAttribute(Xt,"true"),o.textContent=g,l.shadowRoot.appendChild(o))}let i=[];return t.querySelectorAll(""+a).forEach((n,e)=>{n.shadowRoot||!w(n,a)&&"*"!==a||!r(n)?n.shadowRoot&&n.shadowRoot.querySelectorAll(""+a).forEach((e,t)=>{(w(e,a)||"*"===a)&&r(n)&&(e._parentNode=11!==e.parentNode.nodeType?e.parentNode:n,i.push({element:e}))}):(n._parentNode=n.parentNode,i.push({element:n}))}),i}function nn(e){if(!vn(e)||L(e))return!1;let t=!0;for(;"body"!==e.tagName.toLowerCase()&&t;){var n=document.defaultView.getComputedStyle(e,null);t=!((l=e)&&l.tagName&&l.hasAttribute("hidden")||"none"===n.getPropertyValue("display")||"hidden"===n.getPropertyValue("visibility")||(l=e,r=a=n=void 0,l=document.defaultView.getComputedStyle(l,null),n="relative"===(n=l.getPropertyValue("position"))||"absolute"===n,a=l.getPropertyValue("top").replace("px",""),r=l.getPropertyValue("left").replace("px",""),l=l.getPropertyValue("z-index"),n&&(0===a.indexOf("-")&&parseInt(a)<-1e3||0===r.indexOf("-")&&parseInt(r)<-1e3||0===l.indexOf("-")))||(a=n=void 0,n="details"===(r=e).tagName.toLowerCase()?r:r.closest("details"),a="summary"===r.tagName.toLowerCase()?r:r.closest("summary"),n&&!a&&!r.closest("details").open)),e=e._parentNode||e.parentNode}var a,r,l;return t}function L(e){e=e.tagName.toLowerCase();return"script"===e||"style"===e||"noscript"===e}function vn(e){return e&&1===e.nodeType&&!L(e)}function bn(e){return""+r+e}function an(e,t){var n;Jt[e]=t,e=e,t=t,n=k,l(e,t,n)}function k(e,t){var n=Ht;n[e]&&n[e].cssClass&&(n=n[e].cssClass,e=t,Kt)&&(e?Kt.classList.add(n):Kt.classList.remove(n))}t.onMessage.addListener(function(e,t,n){{var a,r;"getDomainInfo"===e.action?n({action:"update",params:{domain:i(),URL:o()}}):(mn&&n({isOpen:!!document.getElementById(jt)}),a=e.action,r=e.params||{},sn=""+e.tabId,Gt[a]&&"test"!==a&&Gt[a](Object.assign({tabId:sn},{settings:Jt},r),n))}});let R=24,V=18.6667,Cn=7,rn=4.5,ln=3,P=document.defaultView;function An(e,t){e=_(e),t=_(t);let n,a;a=t<e?(n=e,t):(n=t,e);t=(n+.05)/(a+.05);return Math.round(100*t)/100}function _(e){var{r:e,g:t,b:n}=e;return.2126*a(e/255)+.7152*a(t/255)+.0722*a(n/255)}function a(e){let t;return t=e<=.03928?e/12.92:Math.pow((e+.055)/1.055,2.4)}function I(e,t){var n=P.getComputedStyle(e,null),a=(n=>{for(var e=[];n&&"body"!==n.tagName.toLowerCase();n=n._parentNode||n.parentNode){let t=n._wcc?._info;if(!t){let e=p(u(n,"background-color"));var a=parseFloat(u(n,"opacity"));t={bgColor:e,opacity:a},n._wcc={_info:t}}a=t.opacity;(0<t.bgColor.o*a||a<1)&&e.push(t)}let t=B();return e.push({bgColor:t,opacity:1}),e})(e);let r=M(a);var l=0<(e=>{let t=1;return e.forEach(e=>{t*=e.opacity}),t})(a)&&A(e),o=parseInt(n.getPropertyValue("font-size").replace("px","")),n=n.getPropertyValue("font-weight"),i=700<=parseInt(n)||"bold"===n||"bolder"===n,i=o>=R||o>=V&&i?"large":"small";a=a,c=p(u(d=e,"color")),d=parseFloat(u(d,"opacity"));let s=M([{bgColor:c,opacity:d}].concat(a));t&&(s=q(s,t),r=q(r,t));var c=An(s,r),d={element:e,fontSize:o,fontWeight:n,size:i,foregroundColor:s,backgroundColor:r,contrast:c,isVisible:l};return"small"==i?(d.isValidAA=c>=rn,d.isValidAAA=c>=Cn):(d.isValidAA=c>=ln,d.isValidAAA=c>=rn),d}function q(e,t){var{r:e,g:n,b:a,o:r}=e;return{r:e*t[0]+n*t[1]+a*t[2]+r*t[3]+t[4],g:e*t[5]+n*t[6]+a*t[7]+r*t[8]+t[9],b:e*t[10]+n*t[11]+a*t[12]+r*t[13]+t[14],o:e*t[15]+n*t[16]+a*t[17]+r*t[18]+t[19]}}function u(e,t){e=P.getComputedStyle(e,null).getPropertyValue(t);if(!e){if("opacity"===t)return 0;if("color"===t)return"rgba(0, 0, 0, 0)";if("background-color"===t)return"rgba(255, 255, 255, 1)"}return e}function B(){var e=p(u(document.querySelector("body"),"background-color"));return e.o?e:{r:255,g:255,b:255,o:1}}function M(t){let n=t[0].bgColor;n.o=n.o*t[0].opacity;for(let e=1;e<t.length;e++)(n=((e,t)=>{var n=e.o;return 1===n?e:{r:(1-n)*t.r+n*e.r,g:(1-n)*t.g+n*e.g,b:n=(1-n)*t.b+n*e.b,o:t=e.o+t.o*(1-e.o)}})(n,t[e].bgColor)).o=t[e].opacity;return n}function on(e){if(e&&"string"==typeof e&&!(0<e.indexOf("#")))switch((e=e.replace("#","")).length){case 3:return/^[0-9A-F]{3}$/i.test(e);case 6:return/^[0-9A-F]{6}$/i.test(e);case 8:return/^[0-9A-F]{8}$/i.test(e);default:return}}function wn(e){return e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,a){return"#"+t+t+n+n+a+a})}function p(e){let t;e=e.replace("rgb(","").replace("rgba(","").replace("(","").replace(")","").replace(/ /g,""),-1<e.indexOf(",")?t=",":-1<e.indexOf(":")?t=":":-1<e.indexOf("/")?t="/":-1<e.indexOf(".")&&(t="."),e=e.split(t);return{r:parseInt(e[0]),g:parseInt(e[1]),b:parseInt(e[2]),o:void 0===e[3]?1:parseFloat(e[3])}}function n(e){var t;return null==e||(e=parseInt(e),isNaN(e))||e<=0?"00":255<e?"FF":(e=Math.round(e),(t="0123456789ABCDEF").charAt((e-e%16)/16)+t.charAt(e%16))}function Ln(e){e=wn(e);e=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return e?{r:parseInt(e[1],16),g:parseInt(e[2],16),b:parseInt(e[3],16)}:null}function D(e){return"#"+n(e.r)+n(e.g)+n(e.b)}function kn(){return"EyeDropper"in window}async function xn(e,t,n){var a;kn()&&(a=await(async()=>{var e=new EyeDropper;try{return(await e.open()).sRGBHex}catch(e){return null}})())&&(e.value=a,n(t.value=a))}en(e=>{let t={childList:!0,subtree:!0,attributes:!0,attributeFilter:["class","src","style","hidden","aria-expanded","open"]},a=window.document.body,r,d={},u,p,l=!1,o=new WeakMap,i=null,s=150,n=!1,c=!1,f=null,g=null;function m(e){x=e.frameId;e=w(u=x);tn({action:"showResultsFromFrame",params:{frameId:x,results:e}})}function h(){var e=window.document.body;e&&e.querySelectorAll("details").forEach(e=>{var t,n;o.has(e)||(t=e.ontoggle,n=()=>{var e;l&&(u||x,e=x,l)&&(i&&clearTimeout(i),i=setTimeout(()=>{i=null,b({frameId:e})},s))},o.set(e,{prev:t,handler:n}),e.ontoggle=n)})}function y(){var e=window.document.body;e&&e.querySelectorAll("details").forEach(e=>{var t=o.get(e);t&&(e.ontoggle=t.prev||null,o.delete(e))})}var v={getResultsFromFrame:b,connectMutationObserver:function(n){C(),n.frameId=x;let e=e=>{b(n)};"warnOnMutation"===n.action&&(e=e=>{var t={message:"DOM updated, analyse the contrast to update results",type:"mutation"};tn({action:"messageToPanel",params:{frameId:n.frameId,message:t}})});h(),r=((e,t,n)=>((n=new MutationObserver(n)).observe(e,t),n))(a,t,((a,r,l)=>{let o;return function(){let e=this,t=arguments;var n=r&&!o;clearTimeout(o),o=setTimeout(function(){o=null,r||a.apply(e,t)},l||S),n&&a.apply(e,t)}})(e,!1))},disconnectMutationObserver:C,closeWidget:A,cleanHighlightedElements:function(){O()},highlightElementsInDocument:function(e){var{elementsRef:e,scrollIntoView:t}=e,e=e.split("//"),n=e[0],a=d[n],r=e[1].split(",");if(a){t&&a[r[0]]&&a[r[0]][0]&&a[r[0]][0].scrollIntoView();var _snips=[];for(let e=0;e<r.length;e++)(e=>{e&&e.forEach(e=>{e.setAttribute(Xt,"true");if(_snips.length<30){var _oh=e.outerHTML;_snips.push(_oh.length>500?_oh.substring(0,500)+"...":_oh)}})})(a[r[e]]);tn({action:"messageToPanel",params:{message:{type:"htmlSnippet",message:_snips}}})}},setCurrentColorMatrix:function(e){p=e.currentColorMatrix},onPanelOpen:function(e={}){l=!0,null!=e.frameId&&(x=e.frameId,u=e.frameId)},onPanelClose:function(){l=!1,n=!1,c=!1,f=null,y(),C(),A(),i&&(clearTimeout(i),i=null);g&&(clearTimeout(g),g=null)}};function b(t){if(l)if(f=t,n)c=!0;else{n=!0;try{m(t)}finally{n=!1}if(c&&(c=!1,l)){let e=f||t;setTimeout(()=>{l&&b(e)},0)}}}function C(){y(),r&&(r.disconnect(),r=null)}function A(){d={},O(),C()}function w(){let i={};var e=N("*",document.body,e=>{var t,n=e,e=E;return!(e&&({elements:e,attributes:t}=e,e=!e||-1<e.indexOf(n.tagName.toLowerCase()),t=!t||t.some(({name:e,value:t})=>{e=n.getAttribute(e);return e&&(!t||e===t)}),e||t))});tn("getCurrentColorMatrix");let s;try{s=B()}catch(e){s={r:255,g:255,b:255,o:1}}let c=0;return e.forEach(({element:e})=>{var t,n,a,r,l,o;nn(e)?(e._wcc={},0<(e=>{if(L(e))return e.nodeValue.replace('"',"'").replace('"',"'").replace("<","&lt;").replace(">","&gt;");if(k(e))return e.getAttribute("alt")||"";let t=e.childNodes,n=t.length,a="";for(let e=0;e<n;e++)a+=(e=>L(e)?e.nodeValue.replace('"',"'").replace('"',"'").replace("<","&lt;").replace(">","&gt;"):k(e)&&e.getAttribute("alt")||"")(t[e]);return a.replace(/\n/g," ").replace(/\t/g," ").replace(/\s+/gi," ")})(e).trim().length&&!e.value&&({size:o,foregroundColor:t,backgroundColor:n,contrast:l,isValidAA:a,isValidAAA:r}=I(e,p,s),l=`"contrast":${l},"size":"${o}","foregroundColor":"${D(t)}","backgroundColor":"${D(n)}"`,i[l]||(i[l]={elements:{},validation:{},colors:{}}),o=e.tagName.toLowerCase(),i[l].elements[o]||(i[l].elements[o]=0),d[l]?d[l][o]||(d[l][o]=[]):d[l]={[o]:[]},-1===d[l][o].indexOf(e)&&d[l][o].push(e),i[l].elements[o]++,i[l].frameId=u,i[l].validation.isValidAA=a,i[l].validation.isValidAAA=r)):c++}),{results:JSON.parse(JSON.stringify(i)),hiddenCount:c}}function L(e){return 3===e.nodeType}function k(e){var t;if(8!==e.nodeType)return("img"===(t=e.tagName.toLowerCase())||"area"===t)&&e.getAttribute("alt")||"input"===t&&e.getAttribute("type")&&"image"===e.getAttribute("type").toLowerCase()}Object.assign(Gt,v)});function Sn(){let r=200,l=350,o=10,n="position-",t,i,s,a,c,d,u,p,f,g,m,h,y,v,b=document.body,e=b.style.marginLeft,C,A,w,L=[];return{createResizer:function(e,t=()=>{}){var{resizingPanel:n,isLeftPosition:a}=e;return i=Qt("div",{class:"extension-panel-resizer",tabindex:"0","aria-label":"use arrow keys to increase or decrease the panel width"},[],[{name:"keydown",callback:k}]),s=i.style,h=n,f=e.pageBody,y=f.getAttribute("style"),c=window.getComputedStyle(f,null).getPropertyValue("margin-left"),d=window.getComputedStyle(f,null).getPropertyValue("margin-right"),u=window.getComputedStyle(f,null).getPropertyValue("position"),g=a?"left":"right",v=t,i.addEventListener("mousedown",S),i.addEventListener("mouseup",E),(e=>{w=e,y=b.getAttribute("style");var t=window.getComputedStyle(b,null),e=(u=t.getPropertyValue("position"),A=t.getPropertyValue("width"),c=t.getPropertyValue("margin-left"),d=t.getPropertyValue("margin-right"),C=t.getPropertyValue("overflow"),N("*",document.body,e=>{var t=window.getComputedStyle(e,null);"fixed"===t.getPropertyValue("position")&&L.push({element:e,left:parseInt(t.getPropertyValue("left")),right:parseInt(t.getPropertyValue("right")),styleLeft:e.style.left,styleRight:e.style.right})}),"left"===Jt.position),n=Jt.savePanelWidthOnResize&&Jt.initialPanelWidth||l;h.style.width=n+"px",e?h.style.left="0":h.style.right="0"})(h),h.appendChild(i),i},removeResizer:function(){b.style.marginLeft=e,i.removeEventListener("mousedown",S),i.removeEventListener("mouseup",E),E(),L.forEach(e=>{var{element:e,styleLeft:t,styleRight:n}=e;e.style.left=t,e.style.right=n}),L.length=0,L=[],i=void 0},updatePanelPosition:function(t){x(),t!==g&&L.forEach(e=>{var{element:e,styleLeft:t,styleRight:n}=e;e.style.left=t,e.style.right=n});var e="left"===(g=t);a=P(),p=o,"static"===u&&(f.style.position="relative");if(e){let e=a+o;a+o<=parseInt(c)&&(e=parseInt(c),p=parseInt(c)-(a+o)),f.style.marginLeft=e+"px",i.style.left=a-o+"px",i.style.right="initial",h.style.paddingLeft="0",h.style.paddingRight=o+"px",h.style.left="0",h.style.right="auto",h.classList.add(n+t),h.classList.remove(n+"right")}else{let e=a+o;a+o<=parseInt(d)&&(e=parseInt(d)+"px",p=parseInt(d)-(a+o)),f.style.marginRight=e+"px",i.style.left="initial",i.style.right=a-o+"px",h.style.paddingLeft=o+"px",h.style.paddingRight="0",h.style.right="0",h.style.left="auto",h.classList.add(n+t),h.classList.remove(n+"left")}V()},getCurrentWidth:P,recoverBodyStyles:x,updateFixedElementsPosition:V};function k(e){var t=e.key,n=e.ctrlKey;let a=0;switch(t){case"ArrowDown":case"ArrowRight":e.preventDefault(),a=10;break;case"ArrowUp":case"ArrowLeft":e.preventDefault(),a=-10}0!==a&&(n&&(a*=5),"right"===g&&(a*=-1),R(P()+a))}function x(){b.style.position=u,b.style.marginLeft=c,b.style.marginRight=d,y?b.setAttribute("style",y):b.removeAttribute("style")}function S(e){m=window.innerWidth,t="left"===g?e.pageX-a:e.pageX,document.addEventListener("mousemove",O),document.addEventListener("mouseup",E),h.addEventListener("mousemove",O),h.addEventListener("mouseup",E)}function E(){document.removeEventListener("mousemove",O),document.removeEventListener("mouseup",E),h.removeEventListener("mousemove",O),h.removeEventListener("mouseup",E),a=_(h.style.width)}function O(e){e.preventDefault(),R("left"===g?e.pageX-t:a-e.pageX+t)}function R(e){var t,n,a;m-e<=r||e<=r||(h.style.width=e+"px",s[g]=e-o+"px",s["left"===g?"right":"left"]="auto",a=e+o,n=(t="left"===g)?c:d,a=a>parseInt(n)?a:parseInt(n),t?f.style.marginLeft=a+"px":f.style.marginRight=a+"px",V(),v&&v(e))}function V(){var e="left"===g?"marginLeft":"marginRight";let n=parseInt(f.style[e]);On?L.forEach(e=>{var t=e.element;t.style[g]=n+e[g]+"px"}):L.forEach(e=>{var{element:e,styleLeft:t,styleRight:n}=e;e.style.left=t,e.style.right=n})}function P(){return _(h.style.width)}function _(e){return parseInt(e.replace(/\D/g,""))}}let T="context-menu",f="context-menu--open",F=0,En={createMenu:(e,t,n="",a="",r=()=>{})=>{var l=T+"-"+F++,o=l+"-menuList";let i=Qt("div",{class:T+" "+n},[],[{name:"click",callback:e=>{e.stopPropagation()}}]),s=Qt("button",{class:"menu-trigger "+a,id:l,"aria-label":t,"aria-haspopup":"true","aria-expanded":"false","aria-controls":o}),c=Qt("ul",{id:o,role:"menu",tabindex:"-1","aria-labelledby":l});e.forEach(a=>{var e=Yt(a.label),t=Qt("li",{role:"presentation",class:"menu-item"+(a.disabled?" menu-item--disabled":"")});let r=e=>{"menuitemcheckbox"!==a.role&&i.close(),a.callback(e)};e=Qt("button",{id:a.id||"",role:a.role||"menuitem",tabindex:"-1",class:a.class},e,{name:"click",callback:r});"menuitemcheckbox"===a.role&&e.setAttribute("aria-checked",!!a.checked),a.disabled&&e.setAttribute("disabled","disabled"),e.addEventListener("keydown",e=>{var t=e.key,n=e.target;switch(t){case"Enter":e.preventDefault(),r(e),"menuitemcheckbox"!==a.role&&i.close();break;case" ":e.preventDefault(),r(e);break;case"ArrowDown":e.preventDefault(),d(c,n).focus();break;case"ArrowUp":e.preventDefault(),!function t(n,e){let a=e?.parentNode.previousSibling;{if(a){let e=a.querySelector("button");return u(e)?e:t(n,e)}{let e=n.querySelectorAll("button:not([disabled])");return e[e.length-1]}}}(c,n).focus();break;case"Escape":e.preventDefault(),i.close();break;case"Tab":i.close()}}),t.appendChild(e),c.appendChild(t)});n=Qt("div",{class:"arrow"});return i.appendChild(s),i.appendChild(c),i.appendChild(n),s.onclick=e=>{var t;i.isOpen?i.close():(r(s),e.stopPropagation(),i.isOpen?(c.classList.remove(zt),s.setAttribute("aria-expanded","false"),i.classList.remove(f),i.isOpen=!1):(t=(e=s.closest(Ut).getBoundingClientRect()).left,e=e.width,c.style.right="-10px",c.style.maxWidth=e-30+"px",c.classList.add(zt),s.setAttribute("aria-expanded","true"),c.firstChild.focus(),(e=c.getBoundingClientRect().left)<t&&(c.style.right=e-t-20+"px"),i.classList.add(f),i.isOpen=!0,d(c).focus()))},i.close=()=>{i.isOpen&&(c.classList.remove(zt),s.setAttribute("aria-expanded","false"),s.focus(),i.isOpen=!1,i.classList.remove(f))},i.isOpen=!1,i;function d(e,t){var t=t?.parentNode.nextSibling;return t?u(t=t.querySelector("button"))?t:d(e,t):e.querySelector("button:not([disabled])")}function u(e){return!e?.getAttribute("disabled")}}},On=!0,z="pin-button",s="pin-by-domain-button",c="pin-by-URL-button",U="pin-button",j="pinned--on",$="pinned--off",W="pinned-by-domain--on",X="pinned-by-domain--off",H="pinned-by-URL--on",J="pinned-by-URL--off",Rn="menu-trigger-pin",Vn="pinned-indicator",sn=null,cn=null,G=null,Pn=En.createMenu;function _n(e,t,n,a){G=a,sn=""+e.tabId;let r=i(),l=o();return[{role:"menuitemcheckbox",id:s,label:""+t.pinPanelByDomainLabel,class:z+" "+s,callback:e=>{var t;n(),e.stopPropagation(),r.trim().length&&(e=i()).trim().length&&(-1<(t=Jt.pinnedByDomain?.split(",")||[]).indexOf(e)?t.splice(t.indexOf(e),1):t.push(e),an("pinnedByDomain",t.join(",")),dn())},disabled:!r.trim().length,checked:!!r.trim().length&&-1<e.settings.pinnedByDomain?.split(",").indexOf(r)},{role:"menuitemcheckbox",id:c,label:""+t.pinPanelByURLLabel,class:z+" "+c,callback:e=>{var t;n(),e.stopPropagation(),l.trim().length&&(e=o()).trim().length&&(-1<(t=Jt.pinnedByURL?.split(",")||[]).indexOf(e)?t.splice(t.indexOf(e),1):t.push(e),an("pinnedByURL",t.join(",")),dn())},disabled:!l.trim().length,checked:!!l.trim().length&&-1<e.settings.pinnedByURL?.split(",").indexOf(l)}]}function dn(){[G,cn].forEach(e=>{if(e){e.classList.remove(j),e.classList.remove($),e.classList.add(Jt.pinned?j:$),e.querySelectorAll("."+U).forEach(e=>e.setAttribute("aria-checked",Jt.pinned));var a=i();let t=!!a.trim().length&&-1<Jt.pinnedByDomain?.split(",").indexOf(a);e.classList.remove(W),e.classList.remove(X),e.classList.add(t?W:X),e.querySelectorAll("."+s).forEach(e=>e.setAttribute("aria-checked",t));a=o();let n=!!a.trim().length&&-1<Jt.pinnedByURL?.split(",").indexOf(a);e.classList.remove(H),e.classList.remove(J),e.classList.add(n?H:J),e.querySelectorAll("."+c).forEach(e=>e.setAttribute("aria-checked",n))}})}function Nn(){let i="dialog-panel",s="dialog-backdrop",c="dialog-wrapper",d="dialog-content-wrapper",u="dialog-title",p="dialog-content custom-scrollbar",f="dialog-actions",g="dialog-action",m="dialog-closer",h="dialog-action-close",y="active",v="",b=null,C=null,A=null,w=null,L=null;return{openDialog:function(e,t,n,a={}){var r,l,o;k()||({openCallback:a,closeCallback:r}=a,b||(b=(()=>{let e="close dialog",t=Qt("div",{id:i,class:c,role:"dialog"}),n=Qt("div",{class:s}),a=(n.onclick=S,t.appendChild(n),Qt("div",{class:d})),r=(t.appendChild(a),w=Qt("h1",{class:u,tabindex:"-1"},void 0,[{name:"keydown",callback:e=>{"tab"===e.key.toLowerCase()&&e.shiftKey&&(e.preventDefault(),t.querySelector(`.${g}:last-child`).focus())}}]),a.appendChild(w),Qt("button",{class:m,"aria-label":e,title:e},[],[{name:"click",callback:S},{name:"keydown",callback:e=>{"tab"===e.key.toLowerCase()&&e.shiftKey&&(e.preventDefault(),l.focus())}}])),l=(a.appendChild(r),C=Qt("div",{class:p}),a.appendChild(C),A=Qt("div",{class:f}),Qt("button",{button:"button",class:g+" "+h},e,[{name:"click",callback:S},{name:"keydown",callback:e=>{"tab"!==e.key.toLowerCase()||e.shiftKey||(e.preventDefault(),r.focus())}}]));return A.appendChild(l),a.appendChild(A),t.addEventListener("keydown",e=>{var t=e.key;e.stopPropagation(),"escape"===t.toLowerCase()&&x()}),t.closeCallback=()=>{},t.close=x,t})(),n.appendChild(b)),w.replaceChildren(),l=t.querySelector("h1"),e=Yt(l?l.textContent:e),l?.parentNode.removeChild(l),w.appendChild(e),t&&C.appendChild(t),l=t.getBoundingClientRect().height,e=C.getBoundingClientRect().height,t=b.getBoundingClientRect().height,l<e&&(e=w.getBoundingClientRect().height,o=A.getBoundingClientRect().height,e=30+e+l+o,b.style.height=e+"px",e<t)&&(b.style.top=(t-e)/2+"px"),b.classList.add(y),(L=document.activeElement).tagName.toLowerCase()===Ut&&(L=n?.parentNode?.activeElement),w.focus(),a&&a(b),b.closeCallback=r,v=document.body.style.overflow,document.body.style.overflow="hidden",document.removeEventListener("keydown",E),document.addEventListener("keydown",E))}};function k(){return b&&b.classList.contains(y)}function x(){b&&k()&&(b.classList.remove(y),b.closeCallback&&b.closeCallback(),C.replaceChildren(),L?.focus(),L=null,b.parentNode.removeChild(b),b=null,document.removeEventListener("keydown",E),document.body.style.overflow=v)}function S(){x()}function E(e){"escape"===e.key.toLowerCase()&&(e.stopPropagation(),x())}}h(()=>en(()=>{tn({action:"update",params:{domain:i(),URL:o()}})})),h(()=>{chrome.runtime;let z="contrastCheckerWrapper",U="results-wrapper",j="example-text",h="results-group-panel",$="elements-counter",W="results",X="validAA",H="invalidAA",J="validAAA",G="invalidAAA",K="results-container",f="no elements detected",y="refresh-button",Q="selector-bar",Y="utilsBar",Z="contrastChecker_release_notes",ee="release notes",te="help",n="news-active",e="release_notes",ne="contrastChecker_closer",v="action-button",ae="custom-scrollbar",re="color-tools",le="custom-analysis",oe="color-field",r="visibleElements",b="valid",g="collapser",ie="tagList",m="expandable",a="expanded",se="check contrast",ce="refresh-analysis",C="single-validation",de="warning",ue="eyeDropper",pe="spinner",fe="visibilityLegend",ge="counter",me="hiddenElementsCounter",he="svgColorBlindSimulation",ye=C+"-size",A=C+"-contrast",ve=C+"-AA-small",be=C+"-AAA-small",Ce=C+"-AA-large",Ae=C+"-AAA-large",we="data-contrast-checker-eyedropper-active",Le="WCAG Contrast checker",w=["Contrast","Size","Elements"],ke="Auto-refresh",xe="Level",Se="Filters",Ee="Foreground color (hex.)",Oe="Background color (hex.)",Re=["Size","Contrast","AA","AAA"],Ve="#000000",Pe="#FFFFFF",L=document.body,k=L.parentNode,_e=L.style,Ne="info-menu",Ie="switch-position-button",x="switch-position-button--left",S="switch-position-button--right",qe="switch position to left",Be="switch position to right",l={ENTER:"Enter",SPACE:" ",UP_ARROW:"ArrowUp",DOWN_ARROW:"ArrowDown"};let Me=350;let s={},_snippetMouseDown=!1,De={mutation:function(e){var t=E.querySelector(y);t&&(t.setAttribute("tittle",e),t.classList.add(de))},htmlSnippet:function(snippets){var _c=E.querySelector(".wcc-html-snippet-panel");if(!_c){_c=Qt("div",{class:"wcc-html-snippet-panel",style:"display:none;padding:0;margin:4px 8px;background:#1a1a2e;color:#d4d4d4;font-family:Consolas,Monaco,monospace;font-size:11px;max-height:250px;overflow:auto;border:1px solid #444;border-radius:4px;direction:ltr;text-align:left"});_c.addEventListener("mousedown",function(){_snippetMouseDown=!0});var _rw=E.querySelector("."+U);if(_rw)_rw.parentNode.insertBefore(_c,_rw.nextSibling)}if(!_c||!snippets||!snippets.length){if(_c)_c.style.display="none";return}_c.style.display="block";while(_c.firstChild)_c.removeChild(_c.firstChild);var _tt=Qt("div",{style:"font-weight:bold;padding:6px 8px;color:#82aaff;font-size:12px;border-bottom:1px solid #333;background:#151530"});_tt.textContent="HTML Source ("+snippets.length+" element"+(snippets.length>1?"s":"")+")";_c.appendChild(_tt);snippets.forEach(function(s,idx){var _ln=Qt("div",{style:"padding:4px 8px;border-bottom:1px solid #252545;white-space:pre-wrap;word-break:break-all;line-height:1.4"});_ln.textContent=(idx+1)+". "+s;_c.appendChild(_ln)})}},Te="visibleElements",Fe={pinPanelLabel:"open automatically",pinPanelByDomainLabel:"open always for this domain",pinMenuLabel:"open automatically",pinPanelToTabLabel:"keep open while browsing",pinPanelByURLLabel:"open always for this URL"},o="expanded",i={},ze,Ue=0,je,E,O,R,c,$e,We,Xe,t,V,P,_,N,He,I,Je,d=!1,u={},Ge=0,Ke=!1,Qe,Ye,Ze,et,tt,q,B={close:()=>{}},M,nt,D,at=En.createMenu,{createResizer:rt,removeResizer:lt,updatePanelPosition:ot,recoverBodyStyles:it,updateFixedElementsPosition:st}=Sn(),ct=Nn().openDialog;var dt={toggle:function(e={}){var t=document.getElementById(jt);t?(gt(),Object.keys(i).forEach(e=>{delete i[e]})):(O=Jt.contrastLevelChecker,R=Jt.autoRefreshCheck,(e=>{e=(t=>(t.indexOf("-")&&(t=t.split("-")[0]),fn.find(e=>e.code===t)?t:Ht.language.defaultValue))(e.browserLanguage);Ht.language.defaultValue=e;{var r=()=>{je=(e=>{M=(()=>{var e=Qt(Ut,{id:jt,dir:"rtl"}),t=(ze=e.attachShadow({mode:"closed"}),Qt(Ut,{class:"colorContrastChecker-body"}));return k.insertBefore(e,L),k.setAttribute(Ft,"true"),ze.appendChild(t),t})();let t=Qt("div",{id:z}),n=(M.style.width=Me+"px",(()=>{var e=Qt("div"),t=(e=>{var t=Qt("div",{class:K}),e=Ct(e);return t.appendChild(e),t})({headers:[[{colspan:1},w[0]],[{},w[1]],[{colspan:4},w[2]]],class:W+" AA",tbody:[Te]});return e.appendChild(t),e})()),r=(I=Qt("div",{class:pe}),Qt("div",{class:`${U} ${O} ${h} `+ae},[n,I])),l=(()=>{var e=Qt("div",{id:re}),t=Qt("div",{}),n=Qt("div",{id:le}),a=d(Ee,"foreground",Ve),r=d(Oe,"background",Pe),l=Qt("span",{style:"font-size: 14pt"},["14pt"]),o=Qt("span",{style:"font-size: 14pt; font-weight: bold"},["14pt bold"]),i=Qt("span",{style:"font-size: 18pt"},["18pt"]),l=Qt("div",{class:j,style:"color: "+Ve+"; background-color: "+Pe},[l,o,i]),i=(o=Ct({headers:Re.map(e=>[{},e]),class:C})).querySelector("tbody"),s=T([[{class:ye},"small"],[{class:A},"21"],[{class:ve+" "+b}],[{class:be+" "+b}]]),c=T([[{class:ye},"Large"],[{class:A},"21"],[{class:Ce+" "+b}],[{class:Ae+" "+b}]]);return e.appendChild(t),n.appendChild(a),n.appendChild(r),t.appendChild(n),i.appendChild(s),i.appendChild(c),t.appendChild(l),t.appendChild(o),e;function d(e,n,t){var a=Qt("div",{class:oe}),e=Yt(e),r=Qt("div"),e=Qt("label",{for:n},e);let l=Qt("input",{id:n,type:"text",value:t,placeholder:"ex. "+t}),o=Qt("input",{id:n+"-selector",type:"color",value:t,"aria-label":`select ${n} color`});return l.oninput=function(){on(this.value)&&(o.value=wn(this.value),F("foreground"===n?"color":"backgroundColor",this.value))},o.oninput=function(){l.value=this.value,F("foreground"===n?"color":"backgroundColor",this.value)},a.appendChild(e),a.appendChild(r),r.appendChild(l),kn()&&(t=Qt("button",{class:ue},[],{name:"click",callback:function(){let t="foreground"===($e=n)?"color":"backgroundColor";xn(l,o,e=>{F(t,e)})}}),r.appendChild(t)),r.appendChild(o),a}})(),o=(()=>{var e=Qt("h1",{},e=Yt(Le)),t=Qt("div",{id:At}),n=Qt("div",{id:Y}),e=(t.appendChild(e),t.appendChild(n),He=((e,t,n,a)=>{sn=""+e.tabId;var r=e.triggerMenuCLass,e=_n(e,t,a);return cn=Pn(e,t.pinMenuLabel,"",`${Rn} ${Vn} `+r,()=>{dn(),n()}),dn(),cn})({tabId:sn,container:t,settings:Jt},Fe,()=>{B.close(),B=He},Dt),n.appendChild(He),q=((e,t,n)=>((e=Qt("button",{class:e,"aria-label":t,title:t})).onclick=n,e))(Ie+" "+("left"===Jt.position?S:x)+" "+v,xt(Jt.position),ft),n.appendChild(q),[{id:Z,label:ee,class:v,callback:Lt},{id:te,label:"help",class:v,callback:wt}]);return N=at(e,"menu",Ne,"",()=>{B.close(),B=N}),n.appendChild(N),(e=Qt("button",{class:ne+" "+v,"aria-label":"close panel"})).onclick=gt,n.appendChild(e),n.appendChild(e),t})(),i=(()=>{var e=Qt("div",{class:Q+" "+h}),t=(V=Qt("div",{class:"level-switcher"}),Yt(xe)),t=Qt("label",{for:"levelSwitcher"},t),n=Vt([[{value:"AA"},"AA"],[{value:"AAA"},"AAA"]],O,"levelSwitcher",function(e){var t=E.querySelector("."+U);t.classList.remove("AA"),t.classList.remove("AAA"),t.classList.add(e),Ot("contrastLevelChecker",O=e)}),n=(t.appendChild(n),V.appendChild(t),P=Qt("div",{class:"refresh-switcher"}),Yt(ke)),t=Qt("label",{for:"refreshSwitcher"},n),n=Vt([[{value:"on"},"on"],[{value:"off"},"off"]],R?"on":"off","refreshSwitcher",St);return t.appendChild(n),P.appendChild(t),_=Qt("div",{class:"colorBlind-switcher"}),e.appendChild(V),e.appendChild(_),e.appendChild(P),e})(Jt),s=Qt("button",{id:ce,class:y+" "+h},[se],[{name:"click",callback:ut}]),a=(E=M,(Kt=M).appendChild(t),Qt("span",{class:ge})),c=Qt("span",{class:me},[a," hidden elements (not reviewed)"]),d=Qt("div",{class:fe},[c]),u="left"===Jt.position;Xe=rt({resizingPanel:M,pageBody:L,isLeftPosition:u},e=>{}),ot(Jt.position),document.addEventListener("click",()=>{N.close(),B.close()});{var[p,f,g,m=Tt]=[["style","context-menu","resizer","scrollBars","dialog"],Kt,function(){Qe=L.getAttribute("style"),Ye=window.getComputedStyle(L,null).getPropertyValue("position"),Ze=window.getComputedStyle(L,null).getPropertyValue("width"),et=window.getComputedStyle(L,null).getPropertyValue("margin-left"),tt=window.getComputedStyle(L,null).getPropertyValue("margin-right"),_e.position="relative",_e.width="auto",t.appendChild(o),t.appendChild(i),t.appendChild(r),t.appendChild(d),t.appendChild(s),t.appendChild(l),Kt.appendChild(Xe),D?kt():Zt(Tt+"releaseNotes.html",e=>{D=e,kt()}),e()},un];let n=(p=Array.isArray(p)?p:[p]).length,a=0;p.forEach(e=>{let t=new XMLHttpRequest;t.overrideMimeType("text/plain"),t.open("GET",""+m+e+".css",!0),t.onload=()=>{var e;4===t.readyState&&200===t.status&&(e=Qt("style",{},Yt(t.responseText.replace(/url\(/g,"url("+m))),f.appendChild(e),++a===n)&&g&&g()},t.onerror=e=>{},t.send(null)})}return M})(()=>{tn("getDocumentList")}),u={};{Nt();let i=Qt("div",{id:he});{var e="colorBlindSimulation.html",n=i,a=function(){var t=i.querySelectorAll("filter"),n=[],a=t.length;for(let e=0;e<a;e++){var r=t[e].id,l=t[e].querySelector("feColorMatrix").values.baseVal;n.push(r),s[r]=[];for(let e=0;e<l.length;e++)s[r].push(l.getItem(e).value)}var e=Qt("label",{for:"colorBlindSwitcher"},Yt(Se)),o=Vt(n.map(e=>[{value:e},e]),"none","colorBlindSwitcher",Pt);e.appendChild(o),_.appendChild(e)};let t=new XMLHttpRequest;e=Tt+e,t.open("GET",e,!0),t.responseType="document",t.onload=function(){var e;4===t.readyState&&200===t.status&&(e=t.responseXML.body.firstChild,n.appendChild(e),a)&&a(n)},t.onerror=function(e){},t.send(null)}k.appendChild(i)}gn,-1<(e=Jt.pinnedTabs?.split(",")||[]).indexOf(sn)||e.push(sn),an("pinnedTabs",e.join(",")),dn(),tn("onPanelOpen")};let a="en";en(t=>{fn.find(e=>e.code===t.language)&&(a=t.language),Zt(pn(a),e=>{let n={};Object.entries(e).forEach(([e,t])=>{n[e]=t.message}),r(n,a)},"json")})}})(e))},update:mt,showResultsFromFrame:function(e){It();var t=e.frameId,e=e.results,t=bn(t),{results:e,hiddenCount:n}=e;!function e(t,n){if(typeof t==typeof n){for(var a in t){if(t.hasOwnProperty(a)!==n.hasOwnProperty(a))return;switch(typeof t[a]){case"object":if(e(t[a],n[a]))break;return;case"function":if(void 0===n[a]||t[a].toString()!==n[a].toString())return;break;default:if(t[a]!==n[a])return}}for(var r in n)if(void 0===t[r])return;return 1}}(e,u[t])&&(u[t]=e,Ge+=n);Object.values(u).map(e=>JSON.stringify(e)).some(e=>!e)||(t=(()=>{let a=Qt("tbody",{class:r}),e=(()=>{var e,t=[];for(e in u)for(var n in u[e])t.push(Object.assign({resultReference:n,frames:[]},u[e][n],hn(n)));{var a=t.sort(pt);if(!(a=[...a.map(e=>JSON.parse(JSON.stringify(e)))]).length)return[];let e=a.shift(),o=[Object.assign({},e,{frames:[e.frameId]})];return a.forEach(e=>{var t=o[o.length-1],{elements:n,contrast:a,size:r}=t;if(e.contrast===a&&e.size===r)for(var l in t.frames.push(e.frameId),e.elements)n[l]?n[l]+=e.elements[l]:n[l]=e.elements[l];else o.push(Object.assign({},e,{frames:[e.frameId]}))}),o}})();return e.forEach(e=>{e=(e=>{let t,n,a=[],{resultReference:l,isVisible:r,contrast:o,size:i,foregroundColor:s,backgroundColor:c,elements:d,frames:u,validation:p}=e,f={foregroundColor:s,backgroundColor:c},g=0,m=(p&&(t=p.isValidAA,n=p.isValidAAA),[]),h=[];h._visibilityStatus="";var y,v=[],b=[];for(y in d){var C=y.split(".")[0],A=y.split(".")[1],w=(-1===v.indexOf(C)&&v.push(C),b.push(y),d[y]);m=m.concat(w),g+=w,h.push({elementsByTagCount:w,tag:y,nodeName:C,visible:A}),""===h._visibilityStatus?h._visibilityStatus=A:h._visibilityStatus!==A&&(h._visibilityStatus="mixed")}if(h.sort((e,t)=>e.nodeName>t.nodeName?1:e.nodeName<t.nodeName?-1:0),1<h.length){let r=Qt("ul");h.forEach(e=>{var{elementsByTagCount:e,tag:t,nodeName:n,visible:a}=e,e=Yt(e+" "+n),n=Qt("li",{tabindex:"-1","data-elements-ref":l+"//"+t,"data-frame-id":u.join(","),"data-visibility":a},e);r.appendChild(n)}),a._sublist=r}return p&&(e=t?X:H,e=(e+=" ")+(n?J:G),a.push([{rowClass:e,class:"contrast-value"},o]),a.push([{class:"font-size"},i]),a.push([{class:"sample",style:(f,"color:"+s+";background-color:"+c)}]),a._rowClass=e),a.push([{class:$},g.toString()]),e=v.join(", "),1<h.length&&(a._expandable=!0),e=Qt("span",{class:ie},[1<v.length?`[${e}]`:e]),a.push([{},e]),a._id=i+"-"+o,a._visibilityStatus=h._visibilityStatus,a._frames=u.join(","),a._colors=f,a._isVisible=r,a._elementsByValue=m,a._referenceElementsProperty=l+"//"+b.join(","),a})(e);let t=e._rowClass||"";void 0===i[e._id]?i[e._id]=!1:i[e._id]&&(t+=" "+o);var n=T(e,{tabindex:"-1",id:e._id,class:t,"data-elements-ref":e._referenceElementsProperty,"data-frame-id":e._frames,"data-visibility":e._visibilityStatus});e._sublist&&n.querySelectorAll("td:last-child")[0].appendChild(e._sublist),a.appendChild(n)}),0===e.length&&(a.appendChild(T([[],[],[],[],[]])),a.appendChild(T([[{class:"empty",colspan:100},f]]))),a})(),d||mt(t),e=Ge,E.querySelector(`.${me} .`+ge).textContent=e,qt())},updateListOfDocuments:function(r){var e=r.documents;u={},Ge=0,e.forEach(e=>{var{url:e,frameId:t}=e,n=bn(t),e=window.document.body.querySelector('iframe[src="'+e+'"]'),a=(e&&e.setAttribute($t,t),e=t,{frame:a=window.document.querySelector("iframe["+$t+'="'+e+'"]'),isVisible:!a||nn(a),frameId:e}).isVisible;Object.assign(r,{frameId:t}),a?(u[n]={},Jt.updateAnalysisOnDOMChanges?tn({action:"connectMutationObserver",params:r}):tn({action:"disconnectMutationObservers",params:r}),e=t,Ue=e,It(),a={settings:Jt,tabId:sn,frameId:Ue},c||(a.action="warnOnMutation"),tn({action:"getResultsFromFrame",params:a}),Et()):tn({action:"disconnectMutationObservers",params:r})})},getCurrentColorMatrix:function(){var e=t&&"none"!==t?s[t]:void 0;tn({action:"sendCurrentColorMatrix",params:{settings:Jt,tabId:sn,currentColorMatrix:e}})},listenMessage:function(e){var{message:e,type:t}=e.message;De[t](e)},updatePinnedStatus:dn};function ut(){tn("getDocumentList")}function pt(e,t){return e.contrast===t.contrast?e.size===t.size?e.frameId<t.frameId?-1:1:e.size<t.size?1:-1:e.contrast<t.contrast?-1:1}function ft(){var e="left"===Jt.position,t=e?"right":"left";Jt.position=t,Jt.leftPosition=e,Mt("position",t),ot(t),q.classList.remove(x),q.classList.remove(S),q.classList.add(e?x:S),q.setAttribute("aria-label",xt(t)),q.setAttribute("title",xt(t))}function gt(){tn("onPanelClose"),gn,-1<(e=Jt.pinnedTabs?.split(",")||[]).indexOf(sn)&&e.splice(e.indexOf(sn),1),an("pinnedTabs",e.join(",")),dn(),u={},tn("closeWidget");var e=document.getElementById(jt),t=e.parentNode;t.removeChild(e),t.removeAttribute(Ft),t.removeAttribute(we),L.style.marginLeft=et,L.style.marginRight=tt,ht(),yn().forEach(t=>{t.shadowRoot.querySelectorAll(`style[${Xt}]`).forEach(e=>{t.shadowRoot.removeChild(e)}),t.removeAttribute(Wt)}),We=void 0,lt(),it(),Nt()}function mt(e){if(document.getElementById(jt)&&vn(e)){ht();var t=E.querySelector("."+K);if(t){var t=t.querySelector("table"),n=t.querySelector("tbody");n&&t.removeChild(n),t.appendChild(e);var a=e.querySelectorAll("[data-elements-ref]"),r=a.length;for(let e=0;e<r;e++){var l=a[e];l.onblur=ht,l.onkeydown=bt,l.onfocus=yt,l.querySelectorAll("."+g).forEach(e=>{e&&(e.onclick=vt)})}d=!1,qt()}}}function ht(){if(_snippetMouseDown){_snippetMouseDown=!1;return}tn({action:"cleanHighlightedElements",params:{}});if(E){var _c=E.querySelector(".wcc-html-snippet-panel");if(_c)_c.style.display="none"}d=!1}function yt(e){var e=e.target,t=e.getAttribute("data-elements-ref"),e=e.getAttribute("data-frame-id"),{foregroundColor:n,backgroundColor:a}=hn(n=(n=(n=t).split("//"))[0]);E.querySelector("[id=foreground]").value=n,F("color",E.querySelector("[id=foreground-selector]").value=n),E.querySelector("[id=background]").value=a,F("backgroundColor",E.querySelector("[id=background-selector]").value=a),tn({action:"highlightElements",params:{elementsRef:t,frames:e}}),d=!0}function vt(e){e=e.target.closest("tr");e.classList.contains(o)?(e.classList.remove(o),i[e.id]=!1):(e.classList.add(o),i[e.id]=!0)}function bt(t){var e=t.key,t=(e!==l.DOWN_ARROW&&e!==l.UP_ARROW||t.preventDefault(),t.target),n="tr"===t.tagName.toLowerCase();if(e===l.DOWN_ARROW){let e=t.nextSibling;n&&t.classList.contains(a)?e=t.querySelector("li:first-child[tabindex]"):e||n||(e=t.closest("tr").nextSibling),e&&e.focus()}else if(e===l.UP_ARROW){let e=t.previousSibling;e?(e=e.classList.contains(a)?e.querySelector("li:last-child[tabindex]"):e)&&e.focus():n||(e=t.closest("tr")).focus()}else n&&(e===l.ENTER||e===l.SPACE)&&t.classList.contains(m)&&t.classList.toggle(a)}function Ct(e){let t=Qt("table",e.class?{class:e.class}:{});var n=Qt("caption",{},Yt(e.caption)),a=Qt("thead"),r=Qt("tr"),l=e.headers;for(let e=0;e<l.length;e++){var o=Qt("th",l[e][0],l[e][1]||[]);r.appendChild(o)}return e.caption&&t.appendChild(n),a.appendChild(r),t.appendChild(a),e.tbody?e.tbody.forEach(function(e){t.appendChild(Qt("tbody",{class:e}))}):t.appendChild(Qt("tbody")),t}function T(t,e,n){let a=Qt("tr",e,[],n);for(let e=0;e<t.length;e++){var r=t[e],l=Qt("td",...r);r.rowClass&&r.rowClass.split(" ").forEach(function(e){a.classList.add(e)}),a.appendChild(l)}return t._expandable&&(e=Qt("span",{class:g},[],[{}]),a.querySelector("td:last-child").insertBefore(e,a.querySelector("td:last-child *:first-child")),a.classList.add(m)),a}mn=!0,Object.assign(Gt,dt);let At="wcag-contrast-checker-header";function wt(){nt?ct("Help",nt,Kt):Zt(Tt+"help.html",e=>{nt=e,wt()})}function Lt(){var e;D?(e=()=>{Ke&&(Mt("widgetVersion",Je),Bt(n,!1),Ke=!1)},ct("Release notes",D,Kt,{closeCallback:e})):Zt(Tt+"releaseNotes.html",e=>{D=e,kt(),Lt()})}function kt(){(Je=D.querySelector("#"+e+" dt:first-child").getAttribute("data-version"))!==Jt.widgetVersion&&(Ke=!0,Bt(n,!0))}function xt(e){return"left"!==e?qe:Be}function St(e){R="on"===e,Ot("autoRefreshCheck",c="on"===e),Ot("updateAnalysisOnDOMChanges",c);e={settings:Jt};Jt.autoRefreshCheck=c,(Jt.updateAnalysisOnDOMChanges=c)?ut():e.action="warnOnMutation",c?tn({action:"connectMutationObserver",params:e}):tn({action:"disconnectMutationObservers",params:e}),Et()}function Et(){var e=E.querySelector(y);e&&(e.removeAttribute("tittle"),e.classList.remove(de))}function Ot(e,t){var n={};n[e]=t,chrome.storage.local.set(n)}function Rt(){var e,t,n=E.querySelector("[id=foreground]").value,a=E.querySelector("[id=background]").value;a=a;let r=!(!on(n=n)||!on(a))&&(a={contrast:n=An(Ln(n),Ln(a)),smallAA:!0,smallAAA:!0,largeAA:!0,largeAAA:!0},n<Cn&&n>=rn?a.smallAAA=!1:n<rn&&n>=ln?(a.smallAA=!1,a.smallAAA=!1,a.largeAAA=!1):n<ln&&(a.smallAA=!1,a.smallAAA=!1,a.largeAA=!1,a.largeAAA=!1),a);r&&(n=E.querySelectorAll("."+ve)[0],a=E.querySelectorAll("."+Ce)[0],e=E.querySelectorAll("."+be)[0],t=E.querySelectorAll("."+Ae)[0],E.querySelectorAll("."+A).forEach(function(e){e.textContent=r.contrast}),p(r.smallAA,n),p(r.smallAAA,e),p(r.largeAA,a),p(r.largeAAA,t))}function p(e,t){e?t.classList.add(b):t.classList.remove(b)}function Vt(t,n,e,a){var r=Qt("select",{value:n,id:e});for(let e=0;e<t.length;e++){var l=Qt("option",t[e][0],t[e][1]||[]);t[e][0].value===n&&l.setAttribute("selected","selected"),r.appendChild(l)}return r.onchange=function(e){a(e.target.value)},r}function F(e,t){e="foreground"===e?"color":e,E.querySelector("."+j).style[e]=t,Rt()}function Pt(e){_t(e),ut()}function _t(e){L.parentNode.classList.remove(t),L.classList.remove(t),On=!e||"none"===e||(L.parentNode.classList.add(e),L.classList.add(e),!1),st();e="none"!==(t=e||"none")?s[t]:void 0;tn({action:"sendCurrentColorMatrix",params:{settings:Jt,tabId:sn,currentColorMatrix:e}})}function Nt(){_t("none");var e=k.querySelector("#"+he);e&&e.parentNode.removeChild(e)}function It(){I.classList.add(zt);var e=E.querySelector("."+r);e&&(e.style.visibility="hidden")}function qt(){I.classList.remove(zt);var e=E.querySelector("."+r);e&&(e.style.visibility="visible")}function Bt(e,t){t?M.classList.add(e):M.classList.remove(e)}function Mt(e,t){var n={};Jt[e]=t,n[e]=t,chrome.storage.local.set(n),Dt(e,t)}function Dt(t,n){en(e=>{e[t]&&e[t].cssClass&&Bt(e[t].cssClass,n)})}});